<!DOCTYPE html>
<!-- saved from url=(0101)http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal -->
<html lang="en-US"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<meta name="viewport" content="width=device-width">
	<title>UART to Serial Terminal | M5</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://umassamherstm5.org/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://umassamherstm5.org/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="dns-prefetch" href="http://ajax.googleapis.com/">
<link rel="dns-prefetch" href="http://fonts.googleapis.com/">
<link rel="dns-prefetch" href="http://s.w.org/">
<link href="https://fonts.gstatic.com/" crossorigin="" rel="preconnect">
<link rel="alternate" type="application/rss+xml" title="M5 » Feed" href="http://umassamherstm5.org/feed">
<link rel="alternate" type="application/rss+xml" title="M5 » Comments Feed" href="http://umassamherstm5.org/comments/feed">
<link rel="alternate" type="application/rss+xml" title="M5 » UART to Serial Terminal Comments Feed" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal/feed">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/umassamherstm5.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.1"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./UART to Serial Terminal _ M5_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script>
		<link rel="stylesheet" href="./UART to Serial Terminal _ M5_files/galleria.classic.css" id="galleria-theme"><style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="wp-syntax-css-css" href="./UART to Serial Terminal _ M5_files/wp-syntax.css" type="text/css" media="all">
<link rel="stylesheet" id="twentythirteen-fonts-css" href="./UART to Serial Terminal _ M5_files/css" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="./UART to Serial Terminal _ M5_files/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="twentythirteen-style-css" href="./UART to Serial Terminal _ M5_files/style.css" type="text/css" media="all">
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='http://umassamherstm5.org/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/jquery.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/galleria-1.2.6.min.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/galleria-common.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/galleria.classic.min.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/jquery.js(1).download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/jquery-migrate.min.js.download"></script>
<link rel="https://api.w.org/" href="http://umassamherstm5.org/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://umassamherstm5.org/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://umassamherstm5.org/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.8.1">
<link rel="canonical" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal">
<link rel="shortlink" href="http://umassamherstm5.org/?p=3148">
<link rel="alternate" type="application/json+oembed" href="http://umassamherstm5.org/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fumassamherstm5.org%2Ftech-tutorials%2Fpic32-tutorials%2Fpic32mx220-tutorials%2Fuart-to-serial-terminal">
<link rel="alternate" type="text/xml+oembed" href="http://umassamherstm5.org/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fumassamherstm5.org%2Ftech-tutorials%2Fpic32-tutorials%2Fpic32mx220-tutorials%2Fuart-to-serial-terminal&amp;format=xml">
			<script type="text/javascript">
				var get_sizes = null;
							</script>
			<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(http://umassamherstm5.org/wp-content/uploads/2017/03/cropped-0225171422-100.jpg) no-repeat scroll top;
			background-size: 1600px auto;
		}
		@media (max-width: 767px) {
			.site-header {
				background-size: 768px auto;
			}
		}
		@media (max-width: 359px) {
			.site-header {
				background-size: 360px auto;
			}
		}
		</style>
			<style type="text/css" id="wp-custom-css">
			/*
You can add your own CSS here.

Click the help icon above to learn more.
*/

.site-title{
	color: beige;
	font-family: "Source Sans Pro", Helvetica, sans-serif;

}
.site-description{
	color: beige;
	font-family: "Source Sans Pro", Helvetica, sans-serif;
}		</style>
	</head>

<body class="page-template-default page page-id-3148 page-child parent-pageid-2911">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="http://umassamherstm5.org/" title="M5" rel="home">
				<h1 class="site-title">M5</h1>
				<h2 class="site-description"></h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<button class="menu-toggle">Menu</button>
					<a class="screen-reader-text skip-link" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal#content" title="Skip to content">Skip to content</a>
					<div class="menu-functional-menu-container"><ul id="primary-menu" class="nav-menu"><li id="menu-item-1327" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1327"><a href="http://umassamherstm5.org/">Home</a></li>
<li id="menu-item-1328" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1328"><a href="http://umassamherstm5.org/m5-info/about">About M5</a></li>
<li id="menu-item-4057" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4057"><a href="http://umassamherstm5.org/newsletter">News and Events</a></li>
<li id="menu-item-1771" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-has-children menu-item-1771"><a href="http://umassamherstm5.org/tech-tutorials">Learn</a>
<ul class="sub-menu">
	<li id="menu-item-2897" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-2897"><a href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials">PIC32 Tutorials</a></li>
</ul>
</li>
<li id="menu-item-1332" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1332"><a href="http://umassamherstm5.org/m5-info/contact-us">Contact Us</a></li>
</ul></div>					<form role="search" method="get" class="search-form" action="http://umassamherstm5.org/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search …" value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="Search">
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

						
				<article id="post-3148" class="post-3148 page type-page status-publish hentry">
					<header class="entry-header">
						
						<h1 class="entry-title">UART to Serial Terminal</h1>
					</header><!-- .entry-header -->

					<div class="entry-content">
						<p>Although the PIC32 is an elegant and powerful microcontroller, it doesn’t stand so tall when compared against a PC in terms of raw computing power! Sometimes it makes sense to use the feasability of the microcontroller to work as a sensor or an embedded controller of some type but still be able to communicate with a more powerful computer. Sometimes you might just want a quick visual display or a <i>printf</i> terminal for debugging. Whatever the reason, this tutorial will provide a basic guide to PIC32 / PC communication.</p>
<h2>UART</h2>
<p>The module used for such communication is the PIC’s <i>Universal Asynchronous Receiver/Transmitter (UART)</i> pronounced “you-art”. For those familiar with computer music, the MIDI protocol uses a UART to do its serial communication. For those familiar with the Arduino, the TX/RX pins on an Arduino are the two main UART pins. In its most basic form the UART hardware consists of a transmit (TX) line and a receive (RX) line. The software configures how fast data is sent (the baud rate) and the specifics of the protocol. </p>
<p><strong>Baud Rate</strong><br>
Since the UART module is <i>asynchronous</i>, there is no external clock line like the synchronous protocols SPI or I2C. Instead, both communicating devices must have their own clock sources configured to the same frequency. As long as these clocks match one another, data should be transferred smoothly. On the PIC32, the <code>UxBRG</code> special function register configures this rate called the baud rate. Note that the <i>x</i> in <i>UxBRG</i> is a placeholder for the reference number of the UART that is being configured. Common baud rates include 4800, 9600, 19200, 57600, and 115200 bits/s. Different baud rates can be chosen by the PIC32 but you must always make sure both devices are very stable at the selected rate. Sometimes it’s best to select a lower baud rate to reduce the chance of errors. Since there is no shared clock, the hardware is simpler but there is an increased chance for the clocks to be out of sync causing incorrect data to be interpreted on the receiving end. For this reason, lower baud rates like 9600 are very popular. </p>
<p>The equation to configure the baud rate using the UxBRG register is below:<br>
<br><br>
<a href="./UART to Serial Terminal _ M5_files/UART-baud-rate-equation.png"><img src="./UART to Serial Terminal _ M5_files/UART-baud-rate-equation.png" alt="" title="UART baud rate equation" width="625" height="185" class="aligncenter size-full wp-image-3199" srcset="http://umassamherstm5.org/wp-content/uploads/2012/09/UART-baud-rate-equation.png 625w, http://umassamherstm5.org/wp-content/uploads/2012/09/UART-baud-rate-equation-300x88.png 300w" sizes="(max-width: 625px) 100vw, 625px"></a></p>
<p><strong>8N1</strong><br>
Like with most peripherals, the configuration options can be overwhelming! We’ll be configuring our UART to use the standard <i>8N1</i> format. 8N1 meaning that each data trasfer consists of 8 bits of data, no parity bits, and 1 stop bit. </p>
<p>The parity bit provides an added layer of error detection. The parity bit is generated by the transmitting unit through a calculation done with the data being sent. If the receiving unit then calculates the same parity bit from the received data, it is assumed that everything is A-O-K. If a different parity bit is calculated, an error is triggered. For example, if odd parity checking is used, the transmitting unit would add up all “1” bits from the data being sent and set the parity bit to 1 if they are odd (like 01001100) or to 0 if even (like 01001101). The receiving unit would use the same calculation and compare the received parity bit to the calculated parity bit. Note that parity checking is done in hardware by the UART unit. However, once a parity error is flagged by the hardware, the programmer must deal with the error in software. Since parity checking will only take you so far (two corrupted bits is treated as no error!), you may desire something more powerful like a <i>Cyclic Redundancy Check (CRC)</i> which is outside the scope of this tutorial. </p>
<p>The stop bit signifies the end of a data transfer. There will almost always be either one or two stop bits. If the stop bits read by the receiving unit don’t match those expected, the receiver will assume its clock drifted out of phase and a the software must deal with this error. It is also implied that a start bit is being sent as well with each transmission. The start bit allows the clock on the receiving end to do a <i>phase lock</i> with the data being received. Otherwise, the receiving end might end up sampling on the data transition edges instead of right in the middle of each bit. The data received would then look like utter nonsense! </p>
<p>So, in an 8N1 configuration, each byte of data sent is transmitted in the form of a 10-bit frame with the addition of one start bit, one stop bit, and no parity bits. </p>
<p>The example below configures the PIC32’s UART1 module to an 8N1 format with a baud rate of 19200 bits/s and enables both transmit and receive functions (in <i>full duplex</i> mode).</p>

<div class="wp_syntax" style="position:relative;"><table><tbody><tr><td class="code"><pre class="c" style="font-family:monospace;"><span style="color: #993333;">int</span> FPb <span style="color: #339933;">=</span> <span style="color: #0000dd;">40000000</span><span style="color: #339933;">;</span>       <span style="color: #666666; font-style: italic;">// peripheral bus clock frequency set at max SYSCLK</span>
<span style="color: #993333;">int</span> desired_baud <span style="color: #339933;">=</span> <span style="color: #0000dd;">19200</span><span style="color: #339933;">;</span>
U1MODE <span style="color: #339933;">=</span> <span style="color: #0000dd;">0</span><span style="color: #339933;">;</span>               <span style="color: #666666; font-style: italic;">// disable autobaud, TX and RX enabled only, 8N1, idle=HIGH</span>
U1STA <span style="color: #339933;">=</span> <span style="color: #208080;">0x1400</span><span style="color: #339933;">;</span>           <span style="color: #666666; font-style: italic;">// enable TX and RX</span>
U1BRG <span style="color: #339933;">=</span> <span style="color: #009900;">(</span>FPb <span style="color: #339933;">/</span> <span style="color: #009900;">(</span><span style="color: #0000dd;">16</span><span style="color: #339933;">*</span>desired_baud<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #339933;">-</span> <span style="color: #0000dd;">1</span> 
&nbsp;
U1MODESET <span style="color: #339933;">=</span> <span style="color: #208080;">0x8000</span><span style="color: #339933;">;</span>     <span style="color: #666666; font-style: italic;">// enable UART1</span></pre></td></tr></tbody></table><p class="theCode" style="display:none;">int FPb = 40000000;       // peripheral bus clock frequency set at max SYSCLK
int desired_baud = 19200;
U1MODE = 0;               // disable autobaud, TX and RX enabled only, 8N1, idle=HIGH
U1STA = 0x1400;           // enable TX and RX
U1BRG = (FPb / (16*desired_baud)) - 1 

U1MODESET = 0x8000;     // enable UART1</p></div>

<p>Note that in the example above, we are using the standard baud mode set when <i>UxMODE&lt;3&gt; = 0</i>. The UART clock is only able to take on specific frequencies and this bit helps determine how close the desired baud rate will be to the actual baud rate. When BRGH = 1 (i.e. UxMODE&lt;3&gt; = 1), high-speed mode is activated and the actual baud rate will probably be closer to the desired baud rate. However, each bit received on the UxRX pin will only be sampled once. When BRGH = 0 (i.e. UxMODE&lt;3&gt; = 0), multiple samples are taken on the UxRX pin to determine whether a HIGH or LOW is present. Even though the high-speed mode may have a more accurate baud rate clock, in standard-mode there is less chance to make receiving errors. See the UART reference manual section 21.6 for more information. </p>
<p>The following table provides a set of desired baud rates, the value you would set BRGH to for this baud rate and the error.<br>
<br><br>
<a href="./UART to Serial Terminal _ M5_files/UART-baud-rate-table.png"><img src="./UART to Serial Terminal _ M5_files/UART-baud-rate-table.png" alt="" title="UART baud rate table" width="392" height="357" class="aligncenter size-full wp-image-3197" srcset="http://umassamherstm5.org/wp-content/uploads/2012/09/UART-baud-rate-table.png 392w, http://umassamherstm5.org/wp-content/uploads/2012/09/UART-baud-rate-table-300x273.png 300w" sizes="(max-width: 392px) 100vw, 392px"></a></p>
<p>Finally, the code below will configure the PIC32 for basic communication with a computer serial terminal. Using the configuration given and some of the functions, it can very easily be adapted for a variety of purposes. We decided it would be suitable just to mock you…</p>

<div class="wp_syntax" style="position:relative;"><table><tbody><tr><td class="code"><pre class="c" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">/* This program configures the PIC32 for communication with a computer at 57600 baud.
 * When the communication link is set up, the program will simply take input text
 * from the user and mock him/her. It demonstrates the basics of UART data Rx/Tx.
 */</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Include Header Files</span>
<span style="color: #339933;">#include &lt;p32xxxx.h&gt;                // include chip specific header file</span>
<span style="color: #339933;">#include &lt;plib.h&gt;                   // include peripheral library functions</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Configuration Bits</span>
<span style="color: #339933;">#pragma config FNOSC = FRCPLL       // Internal Fast RC oscillator (8 MHz) w/ PLL</span>
<span style="color: #339933;">#pragma config FPLLIDIV = DIV_2     // Divide FRC before PLL (now 4 MHz)</span>
<span style="color: #339933;">#pragma config FPLLMUL = MUL_20     // PLL Multiply (now 80 MHz)</span>
<span style="color: #339933;">#pragma config FPLLODIV = DIV_2     // Divide After PLL (now 40 MHz)</span>
                                    <span style="color: #666666; font-style: italic;">// see figure 8.1 in datasheet for more info</span>
<span style="color: #339933;">#pragma config FWDTEN = OFF         // Watchdog Timer Disabled</span>
<span style="color: #339933;">#pragma config ICESEL = ICS_PGx1    // ICE/ICD Comm Channel Select</span>
<span style="color: #339933;">#pragma config JTAGEN = OFF         // Disable JTAG</span>
<span style="color: #339933;">#pragma config FSOSCEN = OFF        // Disable Secondary Oscillator</span>
<span style="color: #339933;">#pragma config FPBDIV = DIV_1       // PBCLK = SYCLK</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Defines</span>
<span style="color: #339933;">#define SYSCLK 40000000L</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Macros</span>
<span style="color: #666666; font-style: italic;">// Equation to set baud rate from UART reference manual equation 21-1</span>
<span style="color: #339933;">#define Baud2BRG(desired_baud)      ( (SYSCLK / (16*desired_baud))-1)</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Function Prototypes</span>
<span style="color: #993333;">int</span> SerialTransmit<span style="color: #009900;">(</span><span style="color: #993333;">const</span> <span style="color: #993333;">char</span> <span style="color: #339933;">*</span>buffer<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
<span style="color: #993333;">unsigned</span> <span style="color: #993333;">int</span> SerialReceive<span style="color: #009900;">(</span><span style="color: #993333;">char</span> <span style="color: #339933;">*</span>buffer<span style="color: #339933;">,</span> <span style="color: #993333;">unsigned</span> <span style="color: #993333;">int</span> max_size<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
<span style="color: #993333;">int</span> UART2Configure<span style="color: #009900;">(</span> <span style="color: #993333;">int</span> baud<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #993333;">int</span> main<span style="color: #009900;">(</span><span style="color: #993333;">void</span><span style="color: #009900;">)</span>
<span style="color: #009900;">{</span>
    <span style="color: #993333;">char</span>   buf<span style="color: #009900;">[</span><span style="color: #0000dd;">1024</span><span style="color: #009900;">]</span><span style="color: #339933;">;</span>       <span style="color: #666666; font-style: italic;">// declare receive buffer with max size 1024</span>
&nbsp;
    <span style="color: #666666; font-style: italic;">// Peripheral Pin Select</span>
    U2RXRbits.<span style="color: #202020;">U2RXR</span> <span style="color: #339933;">=</span> <span style="color: #0000dd;">4</span><span style="color: #339933;">;</span>    <span style="color: #666666; font-style: italic;">//SET RX to RB8</span>
    RPB9Rbits.<span style="color: #202020;">RPB9R</span> <span style="color: #339933;">=</span> <span style="color: #0000dd;">2</span><span style="color: #339933;">;</span>    <span style="color: #666666; font-style: italic;">//SET RB9 to TX</span>
&nbsp;
    UART2Configure<span style="color: #009900;">(</span><span style="color: #0000dd;">57600</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>  <span style="color: #666666; font-style: italic;">// Configure UART2 for a baud rate of 57600</span>
    U2MODESET <span style="color: #339933;">=</span> <span style="color: #208080;">0x8000</span><span style="color: #339933;">;</span>     <span style="color: #666666; font-style: italic;">// enable UART2</span>
&nbsp;
    <span style="color: #808080; font-style: italic;">/* Add a small delay for the serial terminal
     *  Although the PIC sends out data fine, I've had some issues with serial terminals
     *  being garbled if receiving data too soon after bringing the DTR line low and
     *  starting the PIC's data transmission. This has ony been with higher baud rates ( &gt; 9600) */</span>
    <span style="color: #993333;">int</span> t<span style="color: #339933;">;</span>
    <span style="color: #b1b100;">for</span><span style="color: #009900;">(</span> t<span style="color: #339933;">=</span><span style="color: #0000dd;">0</span> <span style="color: #339933;">;</span> t <span style="color: #339933;">&lt;</span> <span style="color: #0000dd;">100000</span> <span style="color: #339933;">;</span> t<span style="color: #339933;">++</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
    SerialTransmit<span style="color: #009900;">(</span><span style="color: #ff0000;">"Hello Earthling!<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>"</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
    SerialTransmit<span style="color: #009900;">(</span><span style="color: #ff0000;">"Talk to me and hit 'enter'. Let the mocking begin!<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>"</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #993333;">unsigned</span> <span style="color: #993333;">int</span> rx_size<span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #b1b100;">while</span><span style="color: #009900;">(</span> <span style="color: #0000dd;">1</span><span style="color: #009900;">)</span><span style="color: #009900;">{</span>
        rx_size <span style="color: #339933;">=</span> SerialReceive<span style="color: #009900;">(</span>buf<span style="color: #339933;">,</span> <span style="color: #0000dd;">1024</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>     <span style="color: #666666; font-style: italic;">// wait here until data is received</span>
        SerialTransmit<span style="color: #009900;">(</span>buf<span style="color: #009900;">)</span><span style="color: #339933;">;</span>                    <span style="color: #666666; font-style: italic;">// Send out data exactly as received</span>
&nbsp;
        <span style="color: #666666; font-style: italic;">// if anything was entered by user, be obnoxious and add a '?'</span>
        <span style="color: #b1b100;">if</span><span style="color: #009900;">(</span> rx_size <span style="color: #339933;">&gt;</span> <span style="color: #0000dd;">0</span><span style="color: #009900;">)</span><span style="color: #009900;">{</span> 
            SerialTransmit<span style="color: #009900;">(</span><span style="color: #ff0000;">"?<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>"</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">}</span>
        SerialTransmit<span style="color: #009900;">(</span><span style="color: #ff0000;">"<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>"</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #009900;">}</span><span style="color: #666666; font-style: italic;">//END while( 1)</span>
&nbsp;
    <span style="color: #b1b100;">return</span> <span style="color: #0000dd;">1</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #666666; font-style: italic;">// END main()</span>
&nbsp;
<span style="color: #808080; font-style: italic;">/* UART2Configure() sets up the UART2 for the most standard and minimal operation
 *  Enable TX and RX lines, 8 data bits, no parity, 1 stop bit, idle when HIGH
 *
 * Input: Desired Baud Rate
 * Output: Actual Baud Rate from baud control register U2BRG after assignment*/</span>
<span style="color: #993333;">int</span> UART2Configure<span style="color: #009900;">(</span> <span style="color: #993333;">int</span> desired_baud<span style="color: #009900;">)</span><span style="color: #009900;">{</span>
&nbsp;
    U2MODE <span style="color: #339933;">=</span> <span style="color: #0000dd;">0</span><span style="color: #339933;">;</span>         <span style="color: #666666; font-style: italic;">// disable autobaud, TX and RX enabled only, 8N1, idle=HIGH</span>
    U2STA <span style="color: #339933;">=</span> <span style="color: #208080;">0x1400</span><span style="color: #339933;">;</span>     <span style="color: #666666; font-style: italic;">// enable TX and RX</span>
    U2BRG <span style="color: #339933;">=</span> Baud2BRG<span style="color: #009900;">(</span>desired_baud<span style="color: #009900;">)</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// U2BRG = (FPb / (16*baud)) - 1</span>
&nbsp;
    <span style="color: #666666; font-style: italic;">// Calculate actual assigned baud rate</span>
    <span style="color: #993333;">int</span> actual_baud <span style="color: #339933;">=</span> SYSCLK <span style="color: #339933;">/</span> <span style="color: #009900;">(</span><span style="color: #0000dd;">16</span> <span style="color: #339933;">*</span> <span style="color: #009900;">(</span>U2BRG<span style="color: #339933;">+</span><span style="color: #0000dd;">1</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #b1b100;">return</span> actual_baud<span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #666666; font-style: italic;">// END UART2Configure()</span>
&nbsp;
<span style="color: #808080; font-style: italic;">/* SerialTransmit() transmits a string to the UART2 TX pin MSB first
 *
 * Inputs: *buffer = string to transmit */</span>
<span style="color: #993333;">int</span> SerialTransmit<span style="color: #009900;">(</span><span style="color: #993333;">const</span> <span style="color: #993333;">char</span> <span style="color: #339933;">*</span>buffer<span style="color: #009900;">)</span>
<span style="color: #009900;">{</span>
    <span style="color: #993333;">unsigned</span> <span style="color: #993333;">int</span> size <span style="color: #339933;">=</span> <span style="color: #000066;">strlen</span><span style="color: #009900;">(</span>buffer<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
    <span style="color: #b1b100;">while</span><span style="color: #009900;">(</span> size<span style="color: #009900;">)</span>
    <span style="color: #009900;">{</span>
        <span style="color: #b1b100;">while</span><span style="color: #009900;">(</span> U2STAbits.<span style="color: #202020;">UTXBF</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>    <span style="color: #666666; font-style: italic;">// wait while TX buffer full</span>
        U2TXREG <span style="color: #339933;">=</span> <span style="color: #339933;">*</span>buffer<span style="color: #339933;">;</span>          <span style="color: #666666; font-style: italic;">// send single character to transmit buffer</span>
&nbsp;
        buffer<span style="color: #339933;">++;</span>                   <span style="color: #666666; font-style: italic;">// transmit next character on following loop</span>
        size<span style="color: #339933;">--;</span>                     <span style="color: #666666; font-style: italic;">// loop until all characters sent (when size = 0)</span>
    <span style="color: #009900;">}</span>
&nbsp;
    <span style="color: #b1b100;">while</span><span style="color: #009900;">(</span> <span style="color: #339933;">!</span>U2STAbits.<span style="color: #202020;">TRMT</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>        <span style="color: #666666; font-style: italic;">// wait for last transmission to finish</span>
&nbsp;
    <span style="color: #b1b100;">return</span> <span style="color: #0000dd;">0</span><span style="color: #339933;">;</span>
<span style="color: #009900;">}</span>
&nbsp;
<span style="color: #808080; font-style: italic;">/* SerialReceive() is a blocking function that waits for data on
 *  the UART2 RX buffer and then stores all incoming data into *buffer
 *
 * Note that when a carriage return '\r' is received, a nul character
 *  is appended signifying the strings end
 *
 * Inputs:  *buffer = Character array/pointer to store received data into
 *          max_size = number of bytes allocated to this pointer
 * Outputs: Number of characters received */</span>
<span style="color: #993333;">unsigned</span> <span style="color: #993333;">int</span> SerialReceive<span style="color: #009900;">(</span><span style="color: #993333;">char</span> <span style="color: #339933;">*</span>buffer<span style="color: #339933;">,</span> <span style="color: #993333;">unsigned</span> <span style="color: #993333;">int</span> max_size<span style="color: #009900;">)</span>
<span style="color: #009900;">{</span>
    <span style="color: #993333;">unsigned</span> <span style="color: #993333;">int</span> num_char <span style="color: #339933;">=</span> <span style="color: #0000dd;">0</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;">/* Wait for and store incoming data until either a carriage return is received
     *   or the number of received characters (num_chars) exceeds max_size */</span>
    <span style="color: #b1b100;">while</span><span style="color: #009900;">(</span>num_char <span style="color: #339933;">&lt;</span> max_size<span style="color: #009900;">)</span>
    <span style="color: #009900;">{</span>
        <span style="color: #b1b100;">while</span><span style="color: #009900;">(</span> <span style="color: #339933;">!</span>U2STAbits.<span style="color: #202020;">URXDA</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span>   <span style="color: #666666; font-style: italic;">// wait until data available in RX buffer</span>
        <span style="color: #339933;">*</span>buffer <span style="color: #339933;">=</span> U2RXREG<span style="color: #339933;">;</span>          <span style="color: #666666; font-style: italic;">// empty contents of RX buffer into *buffer pointer</span>
&nbsp;
        <span style="color: #666666; font-style: italic;">// insert nul character to indicate end of string</span>
        <span style="color: #b1b100;">if</span><span style="color: #009900;">(</span> <span style="color: #339933;">*</span>buffer <span style="color: #339933;">==</span> <span style="color: #ff0000;">'<span style="color: #000099; font-weight: bold;">\r</span>'</span><span style="color: #009900;">)</span><span style="color: #009900;">{</span>
            <span style="color: #339933;">*</span>buffer <span style="color: #339933;">=</span> <span style="color: #ff0000;">'<span style="color: #006699; font-weight: bold;">\0</span>'</span><span style="color: #339933;">;</span>     
            <span style="color: #000000; font-weight: bold;">break</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">}</span>
&nbsp;
        buffer<span style="color: #339933;">++;</span>
        num_char<span style="color: #339933;">++;</span>
    <span style="color: #009900;">}</span>
&nbsp;
    <span style="color: #b1b100;">return</span> num_char<span style="color: #339933;">;</span>
<span style="color: #009900;">}</span> <span style="color: #666666; font-style: italic;">// END SerialReceive()</span></pre></td></tr></tbody></table><p class="theCode" style="display:none;">/* This program configures the PIC32 for communication with a computer at 57600 baud.
 * When the communication link is set up, the program will simply take input text
 * from the user and mock him/her. It demonstrates the basics of UART data Rx/Tx.
 */

// Include Header Files
#include &lt;p32xxxx.h&gt;                // include chip specific header file
#include &lt;plib.h&gt;                   // include peripheral library functions

// Configuration Bits
#pragma config FNOSC = FRCPLL       // Internal Fast RC oscillator (8 MHz) w/ PLL
#pragma config FPLLIDIV = DIV_2     // Divide FRC before PLL (now 4 MHz)
#pragma config FPLLMUL = MUL_20     // PLL Multiply (now 80 MHz)
#pragma config FPLLODIV = DIV_2     // Divide After PLL (now 40 MHz)
                                    // see figure 8.1 in datasheet for more info
#pragma config FWDTEN = OFF         // Watchdog Timer Disabled
#pragma config ICESEL = ICS_PGx1    // ICE/ICD Comm Channel Select
#pragma config JTAGEN = OFF         // Disable JTAG
#pragma config FSOSCEN = OFF        // Disable Secondary Oscillator
#pragma config FPBDIV = DIV_1       // PBCLK = SYCLK

// Defines
#define SYSCLK 40000000L

// Macros
// Equation to set baud rate from UART reference manual equation 21-1
#define Baud2BRG(desired_baud)      ( (SYSCLK / (16*desired_baud))-1)

// Function Prototypes
int SerialTransmit(const char *buffer);
unsigned int SerialReceive(char *buffer, unsigned int max_size);
int UART2Configure( int baud);

int main(void)
{
    char   buf[1024];       // declare receive buffer with max size 1024

    // Peripheral Pin Select
    U2RXRbits.U2RXR = 4;    //SET RX to RB8
    RPB9Rbits.RPB9R = 2;    //SET RB9 to TX

    UART2Configure(57600);  // Configure UART2 for a baud rate of 57600
    U2MODESET = 0x8000;     // enable UART2

    /* Add a small delay for the serial terminal
     *  Although the PIC sends out data fine, I've had some issues with serial terminals
     *  being garbled if receiving data too soon after bringing the DTR line low and
     *  starting the PIC's data transmission. This has ony been with higher baud rates ( &gt; 9600) */
    int t;
    for( t=0 ; t &lt; 100000 ; t++);

    SerialTransmit("Hello Earthling!\r\n");
    SerialTransmit("Talk to me and hit 'enter'. Let the mocking begin!\r\n\r\n");

    unsigned int rx_size;

    while( 1){
        rx_size = SerialReceive(buf, 1024);     // wait here until data is received
        SerialTransmit(buf);                    // Send out data exactly as received

        // if anything was entered by user, be obnoxious and add a '?'
        if( rx_size &gt; 0){ 
            SerialTransmit("?\r\n");
        }
        SerialTransmit("\r\n");
       
    }//END while( 1)

    return 1;
} // END main()

/* UART2Configure() sets up the UART2 for the most standard and minimal operation
 *  Enable TX and RX lines, 8 data bits, no parity, 1 stop bit, idle when HIGH
 *
 * Input: Desired Baud Rate
 * Output: Actual Baud Rate from baud control register U2BRG after assignment*/
int UART2Configure( int desired_baud){

    U2MODE = 0;         // disable autobaud, TX and RX enabled only, 8N1, idle=HIGH
    U2STA = 0x1400;     // enable TX and RX
    U2BRG = Baud2BRG(desired_baud); // U2BRG = (FPb / (16*baud)) - 1

    // Calculate actual assigned baud rate
    int actual_baud = SYSCLK / (16 * (U2BRG+1));

    return actual_baud;
} // END UART2Configure()

/* SerialTransmit() transmits a string to the UART2 TX pin MSB first
 *
 * Inputs: *buffer = string to transmit */
int SerialTransmit(const char *buffer)
{
    unsigned int size = strlen(buffer);
    while( size)
    {
        while( U2STAbits.UTXBF);    // wait while TX buffer full
        U2TXREG = *buffer;          // send single character to transmit buffer

        buffer++;                   // transmit next character on following loop
        size--;                     // loop until all characters sent (when size = 0)
    }

    while( !U2STAbits.TRMT);        // wait for last transmission to finish

    return 0;
}

/* SerialReceive() is a blocking function that waits for data on
 *  the UART2 RX buffer and then stores all incoming data into *buffer
 *
 * Note that when a carriage return '\r' is received, a nul character
 *  is appended signifying the strings end
 *
 * Inputs:  *buffer = Character array/pointer to store received data into
 *          max_size = number of bytes allocated to this pointer
 * Outputs: Number of characters received */
unsigned int SerialReceive(char *buffer, unsigned int max_size)
{
    unsigned int num_char = 0;

    /* Wait for and store incoming data until either a carriage return is received
     *   or the number of received characters (num_chars) exceeds max_size */
    while(num_char &lt; max_size)
    {
        while( !U2STAbits.URXDA);   // wait until data available in RX buffer
        *buffer = U2RXREG;          // empty contents of RX buffer into *buffer pointer

        // insert nul character to indicate end of string
        if( *buffer == '\r'){
            *buffer = '\0';     
            break;
        }

        buffer++;
        num_char++;
    }

    return num_char;
} // END SerialReceive()</p></div>

<h2>But how do we have late night conversations with this UART?</h2>
<p>Although talking directly to your plant might help it grow, humans didn’t evolve alongside microcontrollers and communication is a little bit trickier. There are plenty of ways to go from a computer to the asynchronous serial. Due to the near ubiquity of USB, our example will be USB based and require some conversion hardware.  </p>
<h4>Hardware</h4>
<p>You will need to convert from USB with all of its complexity to a much simpler asynchronous serial signal. Two of the required data lines are obvious: the receive (Rx) and transmit (Tx) lines. We’ll also want power in the form of a 3.3V supply somehow. Finally, we’ll need a reset line so when the computer initiates a communication link, the PIC32 will be reset and no transmissions from the PIC will be lost. </p>
<p>I used a <a href="http://shop.moderndevice.com/products/usb-bub" title="Modern Device USB BUB" target="_blank">USB BUB</a> from the folks down at Modern Device in Providence, RI for $14. Modern Device now sells a newer version aptly named the USB BUB II that works just as well.</p>
<p><a href="./UART to Serial Terminal _ M5_files/UART-terminal-BUB2.jpg"><img src="./UART to Serial Terminal _ M5_files/UART-terminal-BUB2.jpg" alt="" title="UART terminal BUB" width="500" height="214" class="aligncenter size-full wp-image-3162" srcset="http://umassamherstm5.org/wp-content/uploads/2012/06/UART-terminal-BUB2.jpg 500w, http://umassamherstm5.org/wp-content/uploads/2012/06/UART-terminal-BUB2-300x128.jpg 300w" sizes="(max-width: 500px) 100vw, 500px"></a></p>
<p>Another popular option would be to use a 3.3V TTL to UART cable made by FTDI like the TTL-232R-3V3 available for $20.</p>
<p><a href="./UART to Serial Terminal _ M5_files/UART-terminal-FTDI-cable1.jpg"><img src="./UART to Serial Terminal _ M5_files/UART-terminal-FTDI-cable1.jpg" alt="" title="UART terminal FTDI cable" width="442" height="334" class="aligncenter size-full wp-image-3156" srcset="http://umassamherstm5.org/wp-content/uploads/2012/06/UART-terminal-FTDI-cable1.jpg 442w, http://umassamherstm5.org/wp-content/uploads/2012/06/UART-terminal-FTDI-cable1-300x226.jpg 300w" sizes="(max-width: 442px) 100vw, 442px"></a></p>
<p>Whichever option you use, it will probably contain an FTDI chip of some sort. Also, make sure it supports 3.3V or you’ll be logic level converting later.</p>
<p>Now connect the converter’s Rx pin to the PIC’s designated Tx pin (RB9 in the code) and the converter’s Tx pin to the PIC’s designated Rx pin (RB8 in code). Also, connect the converter’s DTR or RTS line to the PIC’s reset pin (MCLR). The DTR/RTS line will go LOW and then HIGH when the serial terminal initiates a communication link. This forces the PIC to reset and begin executing it’s code from bootup. </p>
<p>Make sure you don’t power the PIC with both the PICKit3 and your USB to UART converter! Differences VDD/GND levels will cause potentially large unwanted currents on the power rails. Our hardware setup with the BUB is shown below. Note how the BUB’s jumpers are set to 3.3V operation instead of 5V.<br>
<a href="./UART to Serial Terminal _ M5_files/UART-terminal-circuit.jpg"><img src="./UART to Serial Terminal _ M5_files/UART-terminal-circuit.jpg" alt="" title="UART terminal circuit" width="937" height="703" class="aligncenter size-full wp-image-3152" srcset="http://umassamherstm5.org/wp-content/uploads/2012/06/UART-terminal-circuit.jpg 937w, http://umassamherstm5.org/wp-content/uploads/2012/06/UART-terminal-circuit-300x225.jpg 300w" sizes="(max-width: 937px) 100vw, 937px"></a></p>
<h4>Software</h4>
<p>Although we no longer need to communicate via asynchronous serial data directly to the PIC, we now must send and receive USB packets to our go-between-device. Fortunately, this is pretty simple. </p>
<p>For <strong>Windows</strong> users, you can use PuTTY and select ‘serial’ as the type of communication. Then find the COM port number by going to <i>Device Manager -&gt; Ports</i> after the hardware is connected. The baud rate we have chosen in the code example is 57600. </p>
<p>For <strong>Mac</strong> and <strong>Linux</strong> users, I’ve found GNU Screen to be an incredibly useful program. Not only can you use it as a serial terminal but it also allows you to multiplex between different terminal sessions in a single space! Goodbye screen clutter!</p>
<p>First, to find the device name we’ll be communicating with, open a terminal and enter the command:</p>
<pre>ls /dev | grep usb
</pre>
<p>For Linux users, the output will be something like:</p>
<pre>ttyUSB0
</pre>
<p>where the number (0 above) will increase based on how many USB devices are connected.</p>
<p>For Mac users, the output will be something like:</p>
<pre> 
cu.usbserial-A800cBEp
tty.usbserial-A800cBEp
</pre>
<p>where both names reference the same USB device. Crudely, the ‘tty’ device reference expects a hardware assertion. Communication will be blocked until some reset line (DCD/DTR) has been asserted. The ‘cu’ device reference will be open for communication even without this initialization. Since we’re using a DTR line through the USB BUB, the ‘tty’ name is used below although the ‘cu’ name should work fine.</p>
<p>If multiple devices are listed, disconnect/reconnect and run the list device command as needed. </p>
<p>Once the PIC is programmed, the hardware all set, and the device name is known, use the following command to open a communication channel. Note that the program specifies a baud rate of 57600. Feel free to use the ‘tab’ command to finish any typing any commands that only have one useful outcome. That is, <code>tty.usb[tab]</code> is faster than typing <code>tty.usbserial-A800cBEp</code> if there’s only one USB device connected. </p>
<pre>screen /dev/tty.usbserial-A800cBEp 57600
</pre>
<p>To exit Screen, type <code>ctrl+a k y</code>. To see more Screen options, <code>ctrl+a ?</code>.</p>
<p><a href="./UART to Serial Terminal _ M5_files/UART-terminal-example.png"><img src="./UART to Serial Terminal _ M5_files/UART-terminal-example.png" alt="" title="UART terminal example" width="584" height="406" class="aligncenter size-full wp-image-3170" srcset="http://umassamherstm5.org/wp-content/uploads/2012/08/UART-terminal-example.png 584w, http://umassamherstm5.org/wp-content/uploads/2012/08/UART-terminal-example-300x208.png 300w" sizes="(max-width: 584px) 100vw, 584px"></a></p>
<p>Below is a screenshot of the Saleae logic analyzer. Note that the DTR line is the reset signal sent from the computer to initiate communication with the PIC. The baud rate was set to 4800 for this example.<br>
<a href="./UART to Serial Terminal _ M5_files/UART-Terminal-logic.png"><img src="./UART to Serial Terminal _ M5_files/UART-Terminal-logic.png" alt="" title="UART Terminal logic" width="937" height="305" class="aligncenter size-full wp-image-3194" srcset="http://umassamherstm5.org/wp-content/uploads/2012/09/UART-Terminal-logic.png 1109w, http://umassamherstm5.org/wp-content/uploads/2012/09/UART-Terminal-logic-300x97.png 300w, http://umassamherstm5.org/wp-content/uploads/2012/09/UART-Terminal-logic-1024x333.png 1024w" sizes="(max-width: 937px) 100vw, 937px"></a></p>
											</div><!-- .entry-content -->

					<footer class="entry-meta">
											</footer><!-- .entry-meta -->
				</article><!-- #post -->

				
<div id="comments" class="comments-area">

			<h2 class="comments-title">
			5 thoughts on “<span>UART to Serial Terminal</span>”		</h2>

		<ol class="comment-list">
					<li id="comment-1088" class="comment even thread-even depth-1">
			<article id="div-comment-1088" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./UART to Serial Terminal _ M5_files/b95d39d05dd4e66fe3ee89a53a7d60fd.png" srcset="http://2.gravatar.com/avatar/b95d39d05dd4e66fe3ee89a53a7d60fd?s=148&amp;d=mm&amp;r=g 2x" class="avatar avatar-74 photo" height="74" width="74">						<b class="fn">shalam</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal#comment-1088">
							<time datetime="2012-11-12T01:44:05+00:00">
								12 November 2012 at 01:44							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>hi,<br>
i am trying to sent my unsigned int RX=123456789 to uart.</p>
<p>unsigned int RX;<br>
char str[16];</p>
<p>main(void)<br>
{<br>
	mOSCSetPBDIV( OSC_PB_DIV_1 );	// Configure the PB bus to run at 1/1 the CPU frequency<br>
	AD1PCFG = 0xFFFF;				// Configure ALL pins as digital I/O</p>
<p>	//SET UART PORTS DIRECTION<br>
	mPORTFSetPinsDigitalOut(BIT_5);	// Make RF5 as output.</p>
<p>	//UART2 CONFIG<br>
	OpenUART2(UART_EN | UART_NO_PAR_8BIT |<br>
	UART_1STOPBIT | UART_BRGH_SIXTEEN,<br>
	UART_TX_PIN_LOW | UART_TX_ENABLE, 86); //[80MHZ/(57600*16)]-1<br>
	U2MODESET = 0x8000;     //ENABLE UART1<br>
	U2STASET=0x0400;</p>
<p>	while(1)<br>
	{<br>
		RX=123456789;<br>
		utoa((int)RX, str, 10);<br>
		putsUART2(“HELLO WORLD \r\n”);</p>
<p>	}<br>
}<br>
there’s no error when i built it but nothing comes out to my hyperterminal when i run it.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal?replytocom=1088#respond" onclick="return addComment.moveForm( &quot;div-comment-1088&quot;, &quot;1088&quot;, &quot;respond&quot;, &quot;3148&quot; )" aria-label="Reply to shalam">Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-2528" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-2528" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./UART to Serial Terminal _ M5_files/25d4b4c3c7b8fbabbdc539d2d0167db7.png" srcset="http://2.gravatar.com/avatar/25d4b4c3c7b8fbabbdc539d2d0167db7?s=148&amp;d=mm&amp;r=g 2x" class="avatar avatar-74 photo" height="74" width="74">						<b class="fn">erikb85</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal#comment-2528">
							<time datetime="2013-06-01T17:55:31+00:00">
								1 June 2013 at 17:55							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Great Overview! Have no idea about serial connections or C programming, but got most of it, I think.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal?replytocom=2528#respond" onclick="return addComment.moveForm( &quot;div-comment-2528&quot;, &quot;2528&quot;, &quot;respond&quot;, &quot;3148&quot; )" aria-label="Reply to erikb85">Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-7238" class="comment even thread-even depth-1">
			<article id="div-comment-7238" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./UART to Serial Terminal _ M5_files/203a1e9d0cef761520dbba29a0a240c6.png" srcset="http://2.gravatar.com/avatar/203a1e9d0cef761520dbba29a0a240c6?s=148&amp;d=mm&amp;r=g 2x" class="avatar avatar-74 photo" height="74" width="74">						<b class="fn">sohail</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal#comment-7238">
							<time datetime="2014-03-13T03:52:15+00:00">
								13 March 2014 at 03:52							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>how to transmit and receive the data with spacing 125 ms by using pic 32</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal?replytocom=7238#respond" onclick="return addComment.moveForm( &quot;div-comment-7238&quot;, &quot;7238&quot;, &quot;respond&quot;, &quot;3148&quot; )" aria-label="Reply to sohail">Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-14275" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-14275" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./UART to Serial Terminal _ M5_files/982b7eec068de892b7cce13be18c69b3.png" srcset="http://0.gravatar.com/avatar/982b7eec068de892b7cce13be18c69b3?s=148&amp;d=mm&amp;r=g 2x" class="avatar avatar-74 photo" height="74" width="74">						<b class="fn">siva</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal#comment-14275">
							<time datetime="2014-09-13T04:10:26+00:00">
								13 September 2014 at 04:10							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>how to write code for uart by rs232 and to display on putty by using armcortex-m0</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal?replytocom=14275#respond" onclick="return addComment.moveForm( &quot;div-comment-14275&quot;, &quot;14275&quot;, &quot;respond&quot;, &quot;3148&quot; )" aria-label="Reply to siva">Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-38631" class="comment even thread-even depth-1">
			<article id="div-comment-38631" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./UART to Serial Terminal _ M5_files/2f5985471bfe2633955a0aaa250719fd.png" srcset="http://2.gravatar.com/avatar/2f5985471bfe2633955a0aaa250719fd?s=148&amp;d=mm&amp;r=g 2x" class="avatar avatar-74 photo" height="74" width="74">						<b class="fn">Vivian Amos</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal#comment-38631">
							<time datetime="2015-08-01T19:04:06+00:00">
								1 August 2015 at 19:04							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, how to do a USB to Serial communication with PIC32MX250F128B with Putty ?</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal?replytocom=38631#respond" onclick="return addComment.moveForm( &quot;div-comment-38631&quot;, &quot;38631&quot;, &quot;respond&quot;, &quot;3148&quot; )" aria-label="Reply to Vivian Amos">Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
		
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://umassamherstm5.org/tech-tutorials/pic32-tutorials/pic32mx220-tutorials/uart-to-serial-terminal#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="http://umassamherstm5.org/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate="">
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required="true" required="required"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required="true" required="required"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="3148" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="18e9b6710b"></p><p style="display: none;"></p>			<input type="hidden" id="ak_js" name="ak_js" value="1532266113277"></form>
			</div><!-- #respond -->
	
</div><!-- #comments -->			
		</div><!-- #content -->
	</div><!-- #primary -->


		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
			
			<div class="site-info">
								<a href="https://wordpress.org/">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

				<script type="text/javascript">
				(function($){
					$(function(){
						$("img.flickr.square,img.flickr.thumbnail,img.flickr.small").flightbox({size_callback: get_sizes});
					});
				})(jQuery);
			</script>
		<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/form.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/wp-syntax.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/comment-reply.min.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/functions.js.download"></script>
<script type="text/javascript" src="./UART to Serial Terminal _ M5_files/wp-embed.min.js.download"></script>

</body></html>